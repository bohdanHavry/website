<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Getting Started: Serving Web Content</title>
</head>
<body>
<h1>AVTO SENAT</h1><hr>
    <div th:if="${user.login}">
       <p><b>Ім'я користувача: <i th:text="${user.login}" /></b><br>
           <b>Рівень доступу: <i th:text="${user.roles}" /></b></p>
        <form th:action="@{/logout}" method="post">
            <input type="hidden" name="_csrf" th:value="${_csrf.token}">
            <input type="submit" value="Вийти"/>
        </form>
    </div>
    <span th:unless="${user.login}">
    <a href="/login">Увійти</a></span> <br>

    <div>
        <form th:action="@{/}">
            Пошук по назві товару:<input type="text" name="title" th:value="${title}" ><br>
            <input type="submit" value="Пошук">
            <input type="button" value="Очищення" onclick="clearFilter()">
        </form>
    </div>




<div th:if="!${#lists.isEmpty(goods)}">
    <table>
        <tr th:each="item : ${goods}">
            <td th:text="${item.title}" />
            <td th:text="${item.price}" />
           <td>грн. | <a th:href="@{/main/{idGood}(idGood=${item.id_good})}">Докладніше...</a></td>
        </tr>
    </table>
</div>

<div th:if="${#lists.isEmpty(goods)}">
    Товарів немає
</div>

<div th:if="${user.login}">
<div th:if="${user.isAdmin()}">
    <span th:if="${user.login}"><a th:href="@{/user}">User list</a></span>
    <span th:if="${user.login}"><a th:href="@{/addGood}">Add good</a></span>
</div>
</div>

<script type="text/javascript">
    function clearFilter(){
    window.location = '/';
    }
</script>
</body>
</html>